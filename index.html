<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0f0f1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Crypto Tycoon App</title>
    <link rel="icon" href="https://img.icons8.com/?size=160&id=ovHld7NfgG9g&format=png">

    <style>
        /* --- RESET & CORE --- */
        :root {
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --primary: #f7931a; /* Bitcoin Orange */
            --secondary: #00d2ff; /* Tech Blue */
            --success: #00c853;
            --danger: #ff3d00;
            --text-main: #ffffff;
            --text-muted: #8f8f9e;
            --font-stack: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --nav-height: 75px;
            --safe-area-bottom: env(safe-area-inset-bottom);
        }

        * {
            box-sizing: border-box;
            user-select: none; /* Metin seÃ§imi engelle (App hissi) */
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: var(--font-stack);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- SPLASH SCREEN (AÃ§Ä±lÄ±ÅŸ EkranÄ±) --- */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease, visibility 0.5s;
        }
        .splash-logo { width: 120px; margin-bottom: 20px; animation: pulse 2s infinite; }
        .splash-title { font-size: 1.8rem; font-weight: 800; color: var(--primary); letter-spacing: 1px; margin-bottom: 40px; }
        .loading-bar-container { width: 200px; height: 6px; background: #333; border-radius: 10px; overflow: hidden; }
        .loading-bar-fill { width: 0%; height: 100%; background: var(--primary); transition: width 2s ease-in-out; }
        
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* --- HEADER & NEWS TICKER --- */
        header {
            background: var(--bg-card);
            padding-top: max(15px, env(safe-area-inset-top));
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            z-index: 10;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .news-ticker {
            width: 100%; overflow: hidden; white-space: nowrap;
            background: rgba(0,0,0,0.3); padding: 5px 0; font-size: 0.75rem; color: var(--secondary);
        }
        .news-content { display: inline-block; padding-left: 100%; animation: ticker 20s linear infinite; }
        @keyframes ticker { 0% { transform: translate3d(0, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }

        .balance-area { text-align: center; padding: 10px; }
        .total-balance { font-size: 2.4rem; font-weight: 900; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .total-balance img { width: 35px; }
        .mps-display { font-size: 0.9rem; color: var(--success); font-weight: 600; background: rgba(0, 200, 83, 0.1); padding: 4px 12px; border-radius: 20px; display: inline-block; margin-top: 5px; }

        /* --- APP CONTENT --- */
        #app-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            overflow-y: auto; padding: 20px; padding-bottom: calc(var(--nav-height) + 20px);
            display: none; flex-direction: column; align-items: center;
            opacity: 0; transform: scale(0.95); transition: all 0.2s ease-in-out;
        }
        .screen.active { display: flex; opacity: 1; transform: scale(1); }

        /* --- MADENCÄ°LÄ°K EKRANI --- */
        .mine-wrapper {
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%;
        }
        #tap-btn {
            width: 240px; height: 240px; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ffb144, #f7931a);
            box-shadow: 0 15px 40px rgba(247, 147, 26, 0.4), inset 0 5px 10px rgba(255,255,255,0.5);
            border: none; position: relative; z-index: 5;
            transition: transform 0.05s; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        #tap-btn:active { transform: scale(0.92); }
        #tap-btn img { width: 120px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); pointer-events: none;}
        #tap-btn span { font-weight: bold; font-size: 1.2rem; margin-top: 10px; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.3); pointer-events: none;}

        .particle {
            position: absolute; font-weight: 900; color: #fff; pointer-events: none;
            animation: floatUp 1s cubic-bezier(0, .9, .57, 1) forwards; font-size: 1.6rem; z-index: 100; text-shadow: 0 0 5px rgba(0,0,0,0.5);
        }
        @keyframes floatUp { to { opacity: 0; transform: translateY(-100px) scale(1.5); } }

        /* --- LÄ°STELER (MARKET & GELÄ°ÅžTÄ°RME) --- */
        .section-header { width: 100%; text-align: left; font-size: 1.3rem; font-weight: bold; margin-bottom: 15px; color: var(--text-muted); border-bottom: 1px solid #333; padding-bottom: 5px;}
        
        .card-item {
            width: 100%; background: var(--bg-card); padding: 15px; margin-bottom: 12px;
            border-radius: 16px; display: flex; align-items: center; justify-content: space-between;
            transition: background 0.2s; border: 1px solid transparent;
        }
        .card-item.locked { opacity: 0.5; filter: grayscale(1); pointer-events: none; }
        .card-item:active { transform: scale(0.98); }
        .card-item.can-buy { border-color: rgba(0, 200, 83, 0.3); }

        .card-icon { width: 50px; height: 50px; background: rgba(255,255,255,0.05); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin-right: 15px; }
        .card-info { flex: 1; }
        .card-title { font-weight: 700; font-size: 1rem; margin-bottom: 3px; }
        .card-desc { font-size: 0.8rem; color: var(--text-muted); }
        .card-price-box { text-align: right; }
        .price { color: var(--primary); font-weight: 800; font-size: 0.95rem; }
        .badge { font-size: 0.7rem; background: #333; padding: 2px 6px; border-radius: 4px; color: #ccc; margin-top: 4px; display: inline-block;}

        /* --- HARD FORK (PRESTIGE) --- */
        .prestige-box {
            background: linear-gradient(135deg, #2a004e, #510a32);
            width: 100%; padding: 30px; border-radius: 20px; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); margin-top: 20px;
        }
        .prestige-btn {
            background: #ff3d00; color: white; border: none; padding: 15px 30px; width: 100%;
            border-radius: 12px; font-size: 1.1rem; font-weight: bold; margin-top: 20px; cursor: pointer;
        }

        /* --- NAVIGATION --- */
        nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            height: calc(var(--nav-height) + var(--safe-area-bottom));
            background: rgba(26, 26, 46, 0.95); backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255,255,255,0.05);
            display: flex; justify-content: space-around; align-items: flex-start;
            padding-top: 10px; z-index: 50;
        }
        .nav-btn {
            flex: 1; display: flex; flex-direction: column; align-items: center;
            color: var(--text-muted); background: none; border: none; cursor: pointer; transition: 0.2s;
        }
        .nav-btn.active { color: var(--primary); }
        .nav-btn svg { width: 24px; height: 24px; fill: currentColor; margin-bottom: 4px; }
        .nav-btn span { font-size: 0.7rem; font-weight: 600; }

        /* --- TOAST --- */
        #toast-area { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); z-index: 200; display: flex; flex-direction: column; gap: 8px; pointer-events: none; }
        .toast { background: rgba(30,30,30,0.9); color: #fff; padding: 10px 20px; border-radius: 30px; font-size: 0.85rem; animation: toastAnim 2.5s forwards; border: 1px solid #444; text-align: center;}
        @keyframes toastAnim { 0% { opacity: 0; transform: translateY(20px); } 10% { opacity: 1; transform: translateY(0); } 90% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-20px); } }
        
        /* Helper Classes */
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="splash-screen">
        <img src="https://img.icons8.com/?size=160&id=ovHld7NfgG9g&format=png" class="splash-logo" alt="Logo">
        <div class="splash-title">MINE BITCOIN <span style="color:white">APP</span></div>
        <div class="loading-bar-container">
            <div class="loading-bar-fill" id="loading-fill"></div>
        </div>
        <p style="margin-top: 10px; font-size: 0.8rem; color: #666;">v3.0.1 - Blokzincir senkronize ediliyor...</p>
    </div>

    <header>
        <div class="news-ticker">
            <div class="news-content" id="news-ticker-content">
                Bitcoin fiyatÄ± yeni rekor kÄ±rdÄ±! â€¢ Elon Musk Mars'ta mining tesisi kuruyor... â€¢ Kripto piyasasÄ± yÃ¼kseliÅŸte! â€¢ Yeni GPU modelleri karaborsada.
            </div>
        </div>
        <div class="balance-area">
            <div class="total-balance">
                <img src="https://img.icons8.com/?size=160&id=ovHld7NfgG9g&format=png" alt="BTC">
                <span id="display-btc">0</span>
            </div>
            <div class="mps-display">
                +<span id="display-mps">0</span> BTC/sn
            </div>
        </div>
    </header>

    <div id="app-container">
        
        <div id="screen-mine" class="screen active">
            <div class="mine-wrapper">
                <button id="tap-btn">
                    <img src="https://img.icons8.com/?size=160&id=ovHld7NfgG9g&format=png" alt="Tap">
                    <span>KAZI YAP</span>
                </button>
            </div>
        </div>

        <div id="screen-upgrades" class="screen">
            <div class="section-header">DonanÄ±m MaÄŸazasÄ±</div>
            <div id="upgrade-list"></div>
        </div>

        <div id="screen-profile" class="screen">
            <div class="section-header">YÃ¶netim Paneli</div>
            
            <div style="background: var(--bg-card); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                <p>âš¡ TÄ±klama GÃ¼cÃ¼: <span id="stat-click" style="color:var(--secondary); font-weight:bold">1</span></p>
                <p>ðŸ’» Toplam Ã‡arpan: x<span id="stat-multi" style="color:var(--success); font-weight:bold">1</span></p>
                <p>ðŸ•’ Oynama SÃ¼resi: <span id="stat-time">0dk</span></p>
            </div>

            <div class="prestige-box">
                <h3 style="margin:0; color: #ff79b0;">HARD FORK (SÄ±fÄ±rla)</h3>
                <p style="font-size:0.85rem; color: #ccc; margin: 10px 0;">
                    TÃ¼m ekipmanlarÄ±nÄ± ve parayÄ± sil. KarÅŸÄ±lÄ±ÄŸÄ±nda kalÄ±cÄ± <b>GÃœÃ‡ PUANI</b> kazan.
                </p>
                <p style="font-size:1.2rem; font-weight:bold; color: #fff;">
                    KazanÄ±lacak Bonus: %<span id="prestige-potential">0</span>
                </p>
                <button class="prestige-btn" onclick="doPrestige()">SÄ°STEMÄ° SIFIRLA</button>
            </div>
        </div>

    </div>

    <div id="toast-area"></div>

    <nav>
        <button class="nav-btn active" onclick="setScreen('mine', this)">
            <svg viewBox="0 0 24 24"><path d="M14.79,10.62L3.5,21.9L2.1,20.5L13.38,9.21L14.79,10.62M19.24,3.74L14.38,8.6L15.79,10L20.65,5.16L19.24,3.74M20.65,3.74L21.36,4.45C21.94,5.04 21.94,6 21.36,6.58L18.53,9.41L14.95,5.82L17.77,3C18.36,2.41 19.31,2.41 19.9,3L20.65,3.74Z" /></svg>
            <span>KazÄ±</span>
        </button>
        <button class="nav-btn" onclick="setScreen('upgrades', this)">
            <svg viewBox="0 0 24 24"><path d="M12,18H6V14H12M21,14V12L20,7H4L3,12V14H4V20H14V14H18V20H20V14M20,4H4V6H20V4Z" /></svg>
            <span>Market</span>
        </button>
        <button class="nav-btn" onclick="setScreen('profile', this)">
            <svg viewBox="0 0 24 24"><path d="M12,21H2V9H12V21M14,21H22V3H14V21M2,7H12V3H2V7Z" /></svg>
            <span>Sistem</span>
        </button>
    </nav>

    <script>
        /* --- YAPILANDIRMA VE VERÄ° --- */
        const GAME_VERSION = 3.1;
        
        // Haber BaÅŸlÄ±klarÄ±
        const newsHeadlines = [
            "Bitcoin fiyatÄ± Ay'a ulaÅŸtÄ±! ðŸš€", 
            "Merkez BankasÄ± kripto parayÄ± kabul etti.", 
            "ÃœnlÃ¼ rapÃ§i NFT koleksiyonunu sattÄ±.",
            "Ekran kartÄ± stoklarÄ± tÃ¼kendi!",
            "Madencilik iÃ§in yeni enerji kaynaÄŸÄ± bulundu.",
            "Hackerlar sisteme sÄ±zmaya Ã§alÄ±ÅŸtÄ±, gÃ¼venlik devrede."
        ];

        // GeliÅŸtirmeler (Uzun soluklu olmasÄ± iÃ§in dengeli artÄ±ÅŸ)
        const upgradesDB = [
            { id: 'click1', name: 'Mekanik Klavye', type: 'click', baseCost: 50, basePow: 1, costFactor: 2.5, icon: 'âŒ¨ï¸', desc: '+1 TÄ±klama' },
            { id: 'auto1', name: 'USB Miner', type: 'auto', baseCost: 150, basePow: 5, costFactor: 1.4, icon: 'ðŸ’¾', desc: '+5/sn' },
            { id: 'auto2', name: 'Ev BilgisayarÄ±', type: 'auto', baseCost: 1200, basePow: 25, costFactor: 1.4, icon: 'ðŸ–¥ï¸', desc: '+25/sn' },
            { id: 'click2', name: 'Overclock', type: 'click', baseCost: 5000, basePow: 50, costFactor: 3.0, icon: 'âš¡', desc: '+50 TÄ±klama' },
            { id: 'auto3', name: 'GPU Rig', type: 'auto', baseCost: 15000, basePow: 120, costFactor: 1.5, icon: 'ðŸ“¼', desc: '+120/sn' },
            { id: 'auto4', name: 'ASIC Ã‡iftliÄŸi', type: 'auto', baseCost: 100000, basePow: 600, costFactor: 1.5, icon: 'ðŸ­', desc: '+600/sn' },
            { id: 'auto5', name: 'Kuantum PC', type: 'auto', baseCost: 1500000, basePow: 4000, costFactor: 1.6, icon: 'âš›ï¸', desc: '+4K/sn' },
            { id: 'auto6', name: 'Yapay Zeka AÄŸÄ±', type: 'auto', baseCost: 50000000, basePow: 25000, costFactor: 1.7, icon: 'ðŸ§ ', desc: '+25K/sn' },
            { id: 'auto7', name: 'Uzay Madeni', type: 'auto', baseCost: 1000000000, basePow: 150000, costFactor: 1.8, icon: 'ðŸª', desc: '+150K/sn' }
        ];

        // VarsayÄ±lan Oyun Durumu
        const defaultState = {
            btc: 0,
            startTime: Date.now(),
            prestigeMulti: 1, // Hard Fork Ã‡arpanÄ±
            upgrades: upgradesDB.map(u => ({ id: u.id, count: 0 }))
        };

        let state = JSON.parse(localStorage.getItem('cryptoAppV3')) || defaultState;

        /* --- SÄ°STEM FONKSÄ°YONLARI --- */

        // SayÄ± Formatlama (K, M, B, T, Qa...)
        function formatNum(num) {
            if (num < 1000) return Math.floor(num);
            const suffixes = ["", "K", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc"];
            const suffixNum = Math.floor(("" + Math.floor(num)).length / 3);
            let shortValue = parseFloat((suffixNum !== 0 ? (num / Math.pow(1000, suffixNum)) : num).toPrecision(3));
            if (shortValue % 1 !== 0) {
                shortValue = shortValue.toFixed(2);
            }
            return shortValue + suffixes[suffixNum];
        }

        // TitreÅŸim (Haptic)
        function vibrate(ms = 10) {
            if (navigator.vibrate) navigator.vibrate(ms);
        }

        // Kaydetme
        function saveGame() {
            localStorage.setItem('cryptoAppV3', JSON.stringify(state));
        }
        setInterval(saveGame, 5000); // 5 saniyede bir kaydet

        /* --- OYUN MANTIÄžI --- */

        function getIncomePerSecond() {
            let base = 0;
            state.upgrades.forEach(u => {
                const db = upgradesDB.find(x => x.id === u.id);
                if (db.type === 'auto') base += (u.count * db.basePow);
            });
            return base * state.prestigeMulti;
        }

        function getClickPower() {
            let base = 1;
            state.upgrades.forEach(u => {
                const db = upgradesDB.find(x => x.id === u.id);
                if (db.type === 'click') base += (u.count * db.basePow);
            });
            return base * state.prestigeMulti;
        }

        function getCost(uState, uDb) {
            return Math.floor(uDb.baseCost * Math.pow(uDb.costFactor, uState.count));
        }

        /* --- UI GÃœNCELLEME --- */

        const elBTC = document.getElementById('display-btc');
        const elMPS = document.getElementById('display-mps');
        const elList = document.getElementById('upgrade-list');
        const elPrestigePot = document.getElementById('prestige-potential');

        function updateUI() {
            // Header
            elBTC.innerText = formatNum(state.btc);
            const mps = getIncomePerSecond();
            elMPS.innerText = formatNum(mps);

            // Market Listesi (AkÄ±llÄ± render)
            // Not: GerÃ§ek bir app'te Virtual DOM kullanÄ±lÄ±r ama burada her saniye tÃ¼m listeyi yenilemek yerine
            // sadece butonlarÄ±n durumunu kontrol edeceÄŸiz.
            renderUpgradesIfNeeded();

            // Ä°statistikler
            document.getElementById('stat-click').innerText = formatNum(getClickPower());
            document.getElementById('stat-multi').innerText = state.prestigeMulti.toFixed(1);
            const playedMins = Math.floor((Date.now() - state.startTime) / 60000);
            document.getElementById('stat-time').innerText = playedMins + "dk";

            // Prestige HesabÄ±: 1 Milyon BTC baÅŸÄ±na %10 bonus
            const potential = Math.floor(state.btc / 1000000) * 10;
            elPrestigePot.innerText = potential;
        }

        // Market Listesini OluÅŸtur
        function initShop() {
            elList.innerHTML = '';
            upgradesDB.forEach(db => {
                const item = document.createElement('div');
                item.className = 'card-item';
                item.id = `shop-item-${db.id}`;
                item.onclick = () => buyUpgrade(db.id);
                item.innerHTML = `
                    <div class="card-icon">${db.icon}</div>
                    <div class="card-info">
                        <div class="card-title">${db.name}</div>
                        <div class="card-desc">${db.desc}</div>
                        <span class="badge" id="badge-${db.id}">Lvl 0</span>
                    </div>
                    <div class="card-price-box">
                        <div class="price" id="price-${db.id}">0</div>
                    </div>
                `;
                elList.appendChild(item);
            });
        }

        function renderUpgradesIfNeeded() {
            state.upgrades.forEach(u => {
                const db = upgradesDB.find(x => x.id === u.id);
                const cost = getCost(u, db);
                
                const elItem = document.getElementById(`shop-item-${db.id}`);
                const elPrice = document.getElementById(`price-${db.id}`);
                const elBadge = document.getElementById(`badge-${db.id}`);

                elPrice.innerText = formatNum(cost);
                elBadge.innerText = `Lvl ${u.count}`;

                if (state.btc >= cost) {
                    elItem.classList.add('can-buy');
                    elItem.classList.remove('locked');
                } else {
                    elItem.classList.remove('can-buy');
                    elItem.classList.add('locked');
                }
            });
        }

        /* --- ETKÄ°LEÅžÄ°M --- */

        // Ana Buton TÄ±klama
        const tapBtn = document.getElementById('tap-btn');
        tapBtn.addEventListener('mousedown', handleTap);
        tapBtn.addEventListener('touchstart', function(e){ e.preventDefault(); handleTap(e.touches[0]); }, {passive: false});

        function handleTap(e) {
            const power = getClickPower();
            state.btc += power;
            vibrate(5); // Hafif titreÅŸim
            
            // Efekt (Particle)
            let clientX = e.clientX || (e.touches ? e.touches[0].clientX : window.innerWidth/2);
            let clientY = e.clientY || (e.touches ? e.touches[0].clientY : window.innerHeight/2);
            
            // EÄŸer mobilde koordinat alamazsa butonun ortasÄ±ndan Ã§Ä±ksÄ±n
            if (!clientX) {
                const rect = tapBtn.getBoundingClientRect();
                clientX = rect.left + rect.width/2;
                clientY = rect.top + rect.height/2;
            }

            spawnParticle(clientX, clientY, `+${formatNum(power)}`);
            updateUI();
        }

        function spawnParticle(x, y, text) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerText = text;
            // Biraz rastgelelik kat
            const randX = (Math.random() - 0.5) * 40; 
            p.style.left = (x + randX) + 'px';
            p.style.top = (y - 50) + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 1000);
        }

        // SatÄ±n Alma
        function buyUpgrade(id) {
            const uState = state.upgrades.find(u => u.id === id);
            const db = upgradesDB.find(x => x.id === id);
            const cost = getCost(uState, db);

            if (state.btc >= cost) {
                state.btc -= cost;
                uState.count++;
                vibrate(20); // SatÄ±n alma titreÅŸimi
                showToast(`${db.name} SatÄ±n AlÄ±ndÄ±!`);
                updateUI();
            }
        }

        // Prestige (SÄ±fÄ±rlama)
        function doPrestige() {
            const potential = Math.floor(state.btc / 1000000) * 10; // % Bonus
            if (potential <= 0) {
                showToast("Hard Fork iÃ§in en az 1M Bitcoin gerekli!", true);
                return;
            }

            if (confirm("DÄ°KKAT: TÃ¼m paran ve ekipmanlarÄ±n silinecek! KarÅŸÄ±lÄ±ÄŸÄ±nda %" + potential + " kalÄ±cÄ± gelir artÄ±ÅŸÄ± kazanacaksÄ±n. OnaylÄ±yor musun?")) {
                state.btc = 0;
                state.upgrades.forEach(u => u.count = 0);
                state.prestigeMulti += (potential / 100); // Ã–rn: %10 -> +0.1
                saveGame();
                location.reload(); // Oyunu yeniden baÅŸlat
            }
        }

        /* --- TAB DEÄžÄ°ÅžÄ°MÄ° --- */
        window.setScreen = function(screenId, btn) {
            // EkranlarÄ± gizle
            document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
            document.getElementById('screen-' + screenId).classList.add('active');

            // Navigasyonu gÃ¼ncelle
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            if(btn) btn.classList.add('active');
            vibrate(10);
        }

        function showToast(msg, isError = false) {
            const t = document.createElement('div');
            t.className = 'toast';
            if (isError) t.style.borderColor = 'red';
            t.innerText = msg;
            document.getElementById('toast-area').appendChild(t);
            setTimeout(() => t.remove(), 2600);
        }

        /* --- BAÅžLATMA --- */
        window.onload = function() {
            // Splash Screen Animasyonu
            const fill = document.getElementById('loading-fill');
            setTimeout(() => fill.style.width = "100%", 100);

            setTimeout(() => {
                const splash = document.getElementById('splash-screen');
                splash.style.opacity = '0';
                setTimeout(() => {
                    splash.style.display = 'none';
                }, 500);
            }, 2200); // 2.2 saniye sonra oyun aÃ§Ä±lÄ±r

            // Market kurulumu
            initShop();
            
            // Pasif Gelir DÃ¶ngÃ¼sÃ¼
            setInterval(() => {
                const income = getIncomePerSecond();
                if (income > 0) {
                    state.btc += income / 10; // 100ms'de bir ekle
                    updateUI();
                }
            }, 100);

            // Haberleri DÃ¶ndÃ¼r
            const tickerEl = document.getElementById('news-ticker-content');
            let newsIdx = 0;
            setInterval(() => {
                newsIdx = (newsIdx + 1) % newsHeadlines.length;
                tickerEl.innerText = newsHeadlines.join('  â€¢  ') + '  â€¢  ';
            }, 20000); // Sadece metni gÃ¼ncellemek yetmez, CSS animasyonu dÃ¶nÃ¼yor ama iÃ§eriÄŸi tazelemek iyi olur.

            updateUI();
        };

    </script>
</body>
</html>
